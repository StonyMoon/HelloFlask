<link type="text/css" rel="stylesheet" href={{ url_for('static', filename="code.css") }}/>
{#{% extends "base.html" %}#}
{% import "bootstrap/wtf.html" as wtf %}
{#{% block content %}#}
{#    {% block scripts %}#}
{#        {{ super() }}#}
{#        {{ pagedown.include_pagedown() }}#}
{#    {% endblock %}#}
{##}
{#{% endblock %}#}
{#    <h2>Comments</h2>#}
{#    {% for comment in comments %}#}
{##}
{#        <div class="well">#}
{#            {{ comment.body |safe }}#}
{#            {% if current_user.id == post.author.id or current_user.is_administrator() %}#}
{#                <a style="float:right" href='{{ url_for('main.delete',id=comment.id) }}'#}
{#                   class="btn btn-warning">Delete</a>#}
{#            {% endif %}#}
{#        </div>#}
{##}
{#    {% endfor %}#}
{#    {{ wtf.quick_form(form) }}#}


{#{% endblock %}#}


<!DOCTYPE html>

<html class="no-js" lang="zh-cmn-Hans">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!--IE 8浏览器的页面渲染方式-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <!--默认使用极速内核：针对国内浏览器产商-->
    <meta name="renderer" content="webkit">
    <!--针对移动端的界面优化-->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!--chrome Android 地址栏颜色-->
    <meta name="theme-color" content="#3a3f51">
    <title>Jimi's blog</title>
    <style type="text/css">
        .MathJax_ref {
            text-decoration: underline !important;
        }
    </style>
    <meta name="description" content="这里是宁月的博客">
    <meta name="keywords" content="博客,技术,编程">
    <meta name="generator" content="Typecho 1.0/14.10.10">
    <meta name="template" content="handsome">


    <!-- 第三方CDN加载CSS -->
    <link href="../static/stony/bootstrap.min.css" rel="stylesheet">
    <script async="" src="../static/stony/analytics.js"></script>
    <script src="../static/stony/hm.js"></script>
    <script src="../static/stony/jquery.min.js" data-no-instant=""></script>


    <!-- 本地compass版本 -->
    <link rel="stylesheet" href="../static/stony/appall.min.css" type="text/css">
    <script src="../static/stony/OwO.min.js"></script>

    <link href="../static/stony/lightgallery.min.css" rel="stylesheet">


    <style type="text/css">
        @media only screen and (max-width: 766px) {
            .ymusic {
                display: none
            }
        }

        html.bg {
            background: url('./bg.jpg') fixed;
            background-size: cover;
        }

        /*自定义css代码输出位置*/
    </style>

    <!--网站统计代码-->
    <script data-no-instant="" type="text/javascript">
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?d7337d6ec327297473fd64e3cc6c0818";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();

        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                        (i[r].q = i[r].q || []).push(arguments)
                    }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-97470309-1', 'auto');
        ga('send', 'pageview');</script>

    <style>#instantclick {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        pointer-events: none;
        z-index: 2147483647;
        transition: opacity .25s .1s
    }

    .instantclick-bar {
        background: #29d;
        width: 100%;
        margin-left: -100%;
        height: 2px;
        transition: all .25s
    }</style>


</head>
<body id="body">


<div id="alllayout" class="app app-aside-fixed app-header-fixed">
    <script type="text/javascript">
        $('#alllayout').addClass("app-aside-fixed");
        $('#alllayout').addClass("app-header-fixed");
    </script>
    <!-- header -->
    <header id="header" class="app-header navbar" role="menu">
        <!-- navbar header（交集处） -->
        <div class="navbar-header bg-dark">

            <button class="pull-right visible-xs dk" ui-toggle-class="show" target=".navbar-collapse">
                <i class="glyphicon glyphicon-cog"></i>
            </button>
            <button class="pull-right visible-xs" ui-toggle-class="off-screen" target=".app-aside" ui-scroll="app">
                <i class="glyphicon glyphicon-align-justify"></i>
            </button>
            <!-- brand -->
            <a href="/" class="navbar-brand text-lt">
                <i class="iconfont icon-shouyeshouye"></i>
                <span class="hidden-folded m-l-xs">宁月</span>
            </a>
            <!-- / brand -->
        </div>
        <!-- / navbar header -->

        <!-- navbar collapse（顶部导航栏） -->
        <div class="collapse pos-rlt navbar-collapse box-shadow bg-white-only">
            <!-- buttons -->
            <div class="nav navbar-nav hidden-xs">
                <a data-no-instant="" href="/#" class="btn no-shadow navbar-btn"
                   ui-toggle-class="app-aside-folded" target=".app">
                    <i style="height: 14px!important" class="iconfont icon-dedent text icon-fw"></i>
                    <i style="height: 14px!important" class="iconfont icon-indent icon-fw text-active"></i>
                </a>
                <a href="/#" class="btn no-shadow navbar-btn" ui-toggle-class="show"
                   target="#aside-user">
                    <i style="height: 14px!important" class="iconfont icon-user icon-fw"></i>
                </a>
            </div>
            <!-- / buttons -->


            <!-- search form -->
            <form method="post" class="navbar-form navbar-form-sm navbar-left shift" role="search">
                <div class="form-group">
                    <div class="input-group">
                        <input id="keyword" type="search" name="s"
                               class="form-control input-sm bg-light no-border rounded padder" placeholder="输入关键词搜索…"
                               onkeypress="getKey()">
                        <span class="input-group-btn">
                <a id="soux" href="/search/" data-instant="" type="submit"
                   class="btn btn-sm bg-light rounded"><i class="iconfont icon-search"></i>
                </a>
              </span>
                    </div>
                </div>
            </form>
            <!-- / search form -->

            <!-- 闲言碎语 -->
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="/#" data-toggle="dropdown" class="dropdown-toggle">
                        <i style="height: 14px!important" class="iconfont icon-bell icon-fw"></i>
                        <span class="visible-xs-inline">
                              闲言碎语
                            </span>
                        <span class="badge badge-sm up bg-danger pull-right-xs"></span>
                    </a>
                    <!-- dropdown -->
                    <div class="dropdown-menu w-xl animated fadeInUp">
                        <div class="panel bg-white">
                            <div class="panel-heading b-light bg-light">
                                <strong>
                                    闲言碎语
                                </strong>
                            </div>
                            <div class="list-group">
                            </div>
                        </div>
                    </div>
                    <!-- / dropdown -->
                </li>
                <li class="dropdown">
                    <a href="/auth/login" onclick="return false" data-toggle="dropdown" class="dropdown-toggle clear">
                        <span class="text">登录</span>
                        <b class="caret"></b><!--下三角符号-->
                    </a>

                </li>
            </ul>
            <!-- / 闲言碎语 -->
        </div>
        <!-- / navbar collapse -->
    </header>  <!-- / header -->
    <!-- aside -->

    <aside id="aside" class="app-aside hidden-xs bg-dark">
        <div class="aside-wrap">
            <div class="navi-wrap">
                <!-- user -->
                <div class="clearfix hidden-xs text-center hide show" id="aside-user">
                    <div class="dropdown wrapper">
                        <a href="/">
                            <span class="thumb-lg w-auto-folded avatar m-t-sm">
                  <img src="../static/stony/avatar.jpg" class="img-full">
                </span>
                        </a>
                        <a href="#" data-toggle="dropdown" class="dropdown-toggle hidden-folded">
                <span class="clear">
                  <span class="block m-t-sm">
                    <strong class="font-bold text-lt">宁月</strong>
                    <b class="caret"></b>
                  </span>
                  <span class="text-muted text-xs block">“呀呀呀”</span>
                </span>
                        </a>
                        <!-- dropdown -->
                        <ul class="dropdown-menu animated fadeInRight w hidden-folded">
                            <li class="wrapper b-b m-b-sm bg-info m-t-n-xs">
                                <span class="arrow top hidden-folded arrow-info"></span>
                                <div>

                                    <p>Hello，宁月.</p>
                                </div>
                                <div class="progress progress-xs m-b-none dker">
                                    <div class="progress-bar bg-white" data-toggle="tooltip"
                                         data-original-title="41.67%" style="width: 41.67%"></div>
                                </div>
                            </li>

                            <li>
                                <a href="https://github.com/StonyMoon">
                                    <i style="position: relative;width: 30px;margin: -11px -10px;margin-right: 0px;overflow: hidden;line-height: 30px;text-align: center;"
                                       class="iconfont icon-rss"></i><span>Github</span>
                                </a>
                            </li>

                            <li>
                                <a href="/#"><i
                                        style="position: relative;width: 30px;margin: -11px -10px;margin-right: 0px;overflow: hidden;line-height: 30px;text-align: center;"
                                        class="iconfont icon-rss1"></i><span>Gmail</span></a>
                            </li>

                            <li class="divider"></li>
                            <li>
                                <a data-no-instant="" href="/auth/login">登录</a>
                            </li>
                        </ul>
                        <!-- / dropdown -->
                    </div>
                    <div class="line dk hidden-folded"></div>
                </div>
                <!-- / user -->

                <!-- nav -->
                <nav ui-nav="" class="navi clearfix">
                    <ul class="nav">
                        <!--index-->
                        <li class="hidden-folded padder m-t m-b-sm text-muted text-xs">
                            <span>导航</span>
                        </li>
                        <!--主页-->
                        <li>
                            <a href="/" class="auto">
                                <i class="iconfont icon-home icon text-md"></i>
                                <span>首页</span>
                            </a>
                        </li>
                        <!-- /主页 -->
                        <!--lucky try-->

                        <!-- /lucky try-->
                        <li class="line dk"></li>
                        <!--Components-->
                        <li class="hidden-folded padder m-t m-b-sm text-muted text-xs">
                            <span>组成</span>
                        </li>
                        <!--分类category-->
                        <li>
                            <a data-no-instant="" class="auto">
                  <span class="pull-right text-muted">
                    <i class="iconfont icon-fw icon-angleright text"></i>
                    <i class="iconfont icon-fw icon-angledown text-active"></i>
                  </span>
                                <i class="iconfont icon-c-classification"></i>
                                <span>分类</span>
                            </a>
                            <ul class="nav nav-sub dk">
                                <li class="nav-sub-header">
                                    <a data-no-instant="">
                                        <span>分类</span>
                                    </a>
                                </li><!--不会显示出来-->
                                <!--循环输出分类-->
                                {% for tp in types.keys() %}
                                    <li><a href={{ "/type/"+tp }}><span>{{ tp }}</span></a></li>
                                {% endfor %}
                            </ul>
                        </li>
                        <!--独立页面pages-->
                        <li>
                            <a data-no-instant="" class="auto">
                  <span class="pull-right text-muted">
                    <i class="iconfont icon-fw icon-angleright text"></i>
                    <i class="iconfont icon-fw icon-angledown text-active"></i>
                  </span>
                                <i class="iconfont icon-176pages"></i>
                                <span>页面</span>
                            </a>
                            <ul class="nav nav-sub dk">
                                <li class="nav-sub-header">
                                    <a data-no-instant="">
                                        <span>页面</span>
                                    </a>
                                </li><!--这个字段不会被显示出来-->
                                <!--循环输出独立页面-->
                                <li><a href="/"><span>分类</span></a></li>

                            </ul>
                        </li>


                    </ul>
                </nav>
                <!-- nav -->


            </div>
        </div>
    </aside>
    <!-- / aside -->

    <!-- content -->
    <div id="content" class="app-content">
        <div class="butterbar hide">
            <span class="bar"></span>
        </div>
        <a class="off-screen-toggle hide"></a>
        <main class="app-content-body">
            <div class="hbox hbox-auto-xs hbox-auto-sm">
                <div class="col">
                    <!--标题下的一排功能信息图标：作者/时间/浏览次数/评论数/分类-->
                    <header class="bg-light lter b-b wrapper-md">
                        <h1 class="entry-title m-n font-thin h3 text-black l-h">{{ post.title }} </h1>
                        <!--文章标题下面的小部件-->
                        <ul class="entry-meta text-muted list-inline m-b-none small">
                            <!--作者-->
                            <li class="meta-author"><i class="iconfont icon-user1" aria-hidden="true"></i> <span
                                    class="sr-only">作者：</span> <a class="meta-value" href="/#"
                                                                  rel="author"> {{ post.author.name }}</a></li>
                            <!--发布时间-->
                            <li class="meta-date"><i class="iconfont icon-clocko" aria-hidden="true"></i> <span
                                    class="sr-only">发布时间：</span>
                                <time class="meta-value">{{ post.timestamp }}</time>
                            </li>
                            <!--浏览数-->
                            <li class="meta-views"><i class="iconfont icon-eye" aria-hidden="true"></i> <span
                                    class="meta-value">674次浏览</span></li>

                            <!--分类-->
                            <li class="meta-categories"><i class="iconfont icon-tags" aria-hidden="true"></i> <span
                                    class="sr-only">分类：</span> <span class="meta-value"><a href="/#">{{ post.type }}</a></span>
                            </li>
                        </ul>
                    </header>
                    <div class="wrapper-md">
                        <ol class="breadcrumb bg-white b-a" itemscope="" itemtype="http://schema.org/WebPage">
                            <li><a href="/" itemprop="breadcrumb" data-toggle="tooltip" data-placement="top" title=""
                                   data-original-title="返回首页"><i class="iconfont icon-home" aria-hidden="true"></i>
                                首页</a></li>
                            <li><a href="{{ '/type/'+post.type }}">{{ post.type }}</a></li>
                            <li class="active">正文</li>
                        </ol>
                        <!--博客文章样式 begin with .blog-post-->
                        <div id="postpage" class="blog-post">
                            <article class="panel">
                                <!--文章页面的头图-->
                                <!--文章内容-->
                                {% if current_user.id ==  post.author.id or current_user.is_administrator() %}
                                    <a style="float:right" href='{{ url_for('main.edit',id=post.id) }}'
                                       class="btn btn-success">Edit</a>
                                {% endif %}

                                <div id="post-content" class="wrapper-lg">
                                    <div class="entry-content l-h-2x">


                                        {% if post.body_html %}
                                            {{ post.body_html |safe }}
                                        {% else %}
                                            {{ post.body |safe }}
                                        {% endif %}
                                    </div>
                                </div>
                            </article>
                        </div>

                        <!--评论-->


                        <div id="comments">
                            {% for comment in comments %}

                                <div class="well">
                                    {{ comment.body |safe }}
                                    {% if current_user.id == post.author.id or current_user.is_administrator() %}
                                        <a style="float:right" href='{{ url_for('main.delete',id=comment.id) }}'
                                           class="btn btn-warning">Delete</a>
                                    {% endif %}
                                </div>

                            {% endfor %}
                            {{ wtf.quick_form(form) }}
                            <nav class="text-center m-t-lg m-b-lg" role="navigation">
                            </nav>
                            <script>
                                //给分页按钮增加样式
                                $(".page-navigator").addClass("pagination pagination-md");
                                $("#comments .page-navigator").addClass("pagination-sm");
                                $(".page-navigator .current").addClass("active");
                                $("#comments .comment-list").addClass("list-unstyled m-b-none");
                            </script>
                            <!--如果允许评论，会出现评论框和个人信息的填写-->
                        </div>
                    </div>
                </div>
                <!--首页右侧栏-->

                <aside class="col w-md bg-white-only b-l bg-auto no-border-xs" role="complementary">
                    <div id="sidebar">

                        <!--循环输出分类列表-->
                        <section id="categories-2" class="widget widget_categories wrapper-md clear">
                            <h3 class="widget-title m-t-none text-md">分类</h3>
                            <ul class="list-group">
                                {% for tp in types.keys() %}
                                    <li class="list-group-item"><a href={{ "/type/"+tp }}> <span
                                            class="badge pull-right">{{ types[tp] }}</span>{{ tp }}</a></li>
                                {% endfor %}
                            </ul>
                        </section>
                        <!--在文章页面输出目录，在其他页面输出标签云-->
                        <section id="tag_cloud-2" class="widget widget_tag_cloud wrapper-md clear">
                            <h3 class="widget-title m-t-none text-md">标签</h3>
                            <div class="tags l-h-2x">
                                <a href="/#" class="label bg-info" title=""
                                   data-toggle="tooltip" data-original-title="python">待完善</a>
                            </div>
                        </section>
                    </div>
                </aside>
            </div>
        </main>
    </div>
    <!-- /content -->


</div><!--end of .app app-header-fixed-->


<!--develope本地版本-->
<!--<script data-no-instant src=""></script>
<script data-no-instant src=""></script>
<script data-no-instant src=""></script>
<script src=""></script>-->

<!--CDN加载-->
<script src="../static/stony/bootstrap.min.js" data-no-instant=""></script>
<script data-no-instant="" src="../static/stony/instantclick.min.js"></script>
<script src="../static/stony/highlight.min.js"></script>


<script data-no-instant="" type="text/javascript">
    //自定义js输出位置
    InstantClick.on('change', function (isInitialLoad) {
        if (isInitialLoad === false) {
            if (typeof _hmt !== 'undefined')  // support 百度统计
                _hmt.push(['_trackPageview', location.pathname + location.search]);
            if (typeof ga !== 'undefined')  // support google analytics
                ga('send', 'pageview', location.pathname + location.search);
            if (typeof DUOSHUO !== 'undefined') //多说
                DUOSHUO.EmbedThread('.ds-thread');
        }
        $('pre code').each(function (i, block) {
            hljs.highlightBlock(block);
        });
        //instantclick 回调函数输出位置
    });
    InstantClick.init('70');
</script>


<!-- 压缩后版本 -->
<script data-no-instant="" src="../static/stony/main.min.js"></script>
<script src="../static/stony/script.min.js"></script>


<!--页面布局header-fix-->
<script type="text/javascript">
    $(document).ready(function () {
        $('#comments a[href^=#][href!=#]').click(function () {
            var target = document.getElementById(this.hash.slice(1));
            if (!target) return;
            var targetOffset = $(target).offset().top - 50;
            $('html,body').animate({
                        scrollTop: targetOffset
                    },
                    300);
            return false;
        });//主要修复评论定位不准确BUG
        if (window.location.hash.indexOf('#') >= 0) {
            setTimeout(function () {
                $('html,body').animate({scrollTop: ($(window.location.hash).offset().top - 50) + "px"}, 300);
            }, 700);
        }//主要修复评论定位不准确BUG
    });
</script>
<!--页页面布局header-fix结束-->

<!--comments.php 页面必需js-->
<!--comments.php 必需js结束-->

<!--lightgallery必备组件-->
<script src="../static/stony/lightgallery.min.js"></script>
<script src="../static/stony/jquery.mousewheel.min.js"></script>
<script src="../static/stony/lg-zoom.min.js"></script>

<!--代码高亮插件启动-->
<script>hljs.initHighlightingOnLoad();</script>


<!--图片延迟加载开始-->
<!--图片延迟加载结束-->

<!--音乐播放器开始。by qqdie 修改自youduBGM插件-->
<!--音乐播放器结束-->


<!-- / footer -->
</body><!--#body end--></html>